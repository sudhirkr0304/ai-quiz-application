<mat-card class="result-card">
  <mat-card-header>
    <mat-card-title>Quiz Results</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <div class="score-summary">
      <h2>Final Score: {{ result.score }} / {{ result.totalQuestions }}</h2>
      <h3>Percentage: {{ percentage }}%</h3>
    </div>

    <mat-divider></mat-divider>

    <div class="detailed-analysis">
      <h3>Detailed Analysis</h3>

      <mat-accordion>
        <mat-expansion-panel
          *ngFor="let answer of result.answers; let i = index"
        >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Question {{ i + 1 }}
              <mat-icon
                [class.correct]="answer.isCorrect"
                [class.wrong]="!answer.isCorrect"
              >
                {{ answer.isCorrect ? "check_circle" : "cancel" }}
              </mat-icon>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <p><strong>Question:</strong> {{ answer.question }}</p>
          <p [class.wrong-answer]="!answer.isCorrect">
            <strong>Your Answer:</strong> {{ answer.userAnswer }}
          </p>
          <p *ngIf="!answer.isCorrect" class="correct-answer">
            <strong>Correct Answer:</strong> {{ answer.correctAnswer }}
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-raised-button color="primary" (click)="restartQuiz()">
      Try Again
    </button>
  </mat-card-actions>
</mat-card>
